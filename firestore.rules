rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    // Users can read, update, and create their own document.
    match /users/{userId} {
      allow read, update, create: if request.auth.uid == userId;
    }

    // Rules for other collections, allowing users to create/read their own content.
    match /voiceEvents/{docId} {
      allow create: if request.auth.uid == request.resource.data.uid;
      allow read: if request.auth.uid == resource.data.uid;
    }
    match /dreamEvents/{docId} {
      allow create: if request.auth.uid == request.resource.data.uid;
      allow read: if request.auth.uid == resource.data.uid;
    }
    match /people/{docId} {
      allow create: if request.auth.uid == request.resource.data.uid;
      allow read, update: if request.auth.uid == resource.data.uid;
    }
    match /cameraCaptures/{docId} {
      allow create: if request.auth.uid == request.resource.data.uid;
      allow read: if request.auth.uid == resource.data.uid;
    }
    match /symbolicImageInsights/{docId} {
      allow create: if request.auth.uid == request.resource.data.uid;
      allow read: if request.auth.uid == resource.data.uid;
    }
    match /innerTexts/{docId} {
      allow create: if request.auth.uid == request.resource.data.uid;
      allow read: if request.auth.uid == resource.data.uid;
    }
    match /onboardIntake/{docId} {
      allow create: if request.auth.uid == request.resource.data.uid;
      allow read: if request.auth.uid == resource.data.uid;
    }
    match /goals/{docId} {
      allow create: if request.auth.uid == request.resource.data.uid;
      allow read: if request.auth.uid == resource.data.uid;
    }
    match /tasks/{docId} {
      allow create: if request.auth.uid == request.resource.data.uid;
      allow read, update: if request.auth.uid == resource.data.uid;
    }
    match /calendarEvents/{docId} {
      allow create: if request.auth.uid == request.resource.data.uid;
      allow read: if request.auth.uid == resource.data.uid;
    }
    match /habitWatch/{docId} {
      allow create: if request.auth.uid == request.resource.data.uid;
      allow read: if request.auth.uid == resource.data.uid;
    }
  }
}
